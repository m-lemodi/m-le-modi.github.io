<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-tap-highlight-color:transparent;background-color:transparent;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTQwIDcwSDIwVjUwbTIwIDBMMjAgNzBtNDAtNDBoMjB2MjBtLTIwIDAgMjAtMjAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTIwIDUwaDIwdjIwbS0yMCAwIDIwLTIwbTQwIDBINjBWMzBtMjAgMEw2MCA1MCIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS13aWR0aDo1cHh9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImEiIGQ9Ik0yMCA2MGgtNWE1IDUgMCAwIDEtNS01VjIwYTUgNSAwIDAgMSA1LTVoNjBhNSA1IDAgMCAxIDUgNXY1TTMwIDg1aDYwIi8+PHJlY3QgeD0iMzAiIHk9IjM1IiB3aWR0aD0iNjAiIGhlaWdodD0iNDAiIHJ4PSI1IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiLz48cmVjdCBjbGFzcz0iYSIgeD0iMzAiIHk9IjM1IiB3aWR0aD0iNjAiIGhlaWdodD0iNDAiIHJ4PSI1Ii8+PHBhdGggY2xhc3M9ImEiIGQ9Ik00MCA1MGg0ME00MCA2MGgzMCIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{-webkit-animation-name:__bespoke_marp__!important;animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{bottom:0;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:rgba(0,0,0,.65);border-radius:7px;bottom:50px;color:#fff;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:transparent}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template-areas:"current next" "current note" "info    note";grid-template-columns:2fr 1fr;grid-template-rows:minmax(140px,1fr) 2fr 3em;height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:transparent;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{word-wrap:break-word;scrollbar-width:thin;scrollbar-color:hsla(0,0%,93.3%,.5) transparent;box-sizing:border-box;font-size:1.1em;height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;white-space:pre-wrap;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:hsla(0,0%,93.3%,.5);border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>@charset "UTF-8";@import url("https://fonts.googleapis.com/css?family=Lato:400,900|IBM+Plex+Sans:400,700");@import url('https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@600&display=swap');div#p>svg>foreignObject>section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center}div#p>svg>foreignObject>section:after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#p>svg>foreignObject>section:not([data-marpit-pagination]):after{display:none}/* Normalization */div#p>svg>foreignObject>section h1{font-size:2em;margin:0.67em 0}div#p>svg>foreignObject>section video::-webkit-media-controls{will-change:transform}@page{size:1280px 720px;margin:0}@media print{body,html{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#p>svg>foreignObject>section{page-break-before:always;break-before:page}div#p>svg>foreignObject>section,div#p>svg>foreignObject>section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#p>svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{display:block;height:auto;width:100%}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{position:static}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{content:""}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{position:relative}}div#p>svg>foreignObject>section [data-marp-fitting-svg-content]{display:table;white-space:nowrap;width:-webkit-max-content;width:-moz-max-content;width:max-content}div#p>svg>foreignObject>section [data-marp-fitting-svg-content-wrap]{white-space:pre}div#p>svg>foreignObject>section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}
/*!
 * Marp Dracula theme.
 * @theme dracula
 * @author Daniel Nicolas Gisolfi
 *
 * @auto-scaling true
 * @size 4:3 960px 720px
 * @size 16:9 1280px 720px
 */div#p>svg>foreignObject>section:not(\9){--dracula-background:#282a36;--dracula-current-line:#44475a;--dracula-foreground:#f8f8f2;--dracula-comment:#6272a4;--dracula-cyan:#8be9fd;--dracula-green:#50fa7b;--dracula-orange:#ffb86c;--dracula-pink:#ff79c6;--dracula-purple:#bd93f9;--dracula-red:#ff5555;--dracula-yellow:#f1fa8c;--scaleway-purple:#4f0599;--scaleway-light-purple:#9140e2;--scaleway-white:#f5f6fa;--scaleway-blue:#64d3ff}div#p>svg>foreignObject>section .hljs{display:block;overflow-x:auto;padding:0.5em;background:var(--scaleway-purple);background:linear-gradient(45deg,var(--scaleway-purple) 0%,var(--scaleway-light-purple) 100%)}

/* Dracula Foreground */div#p>svg>foreignObject>section .hljs,div#p>svg>foreignObject>section .hljs-subst,div#p>svg>foreignObject>section .hljs-template-variable,div#p>svg>foreignObject>section .hljs-typing,div#p>svg>foreignObject>section .hljs-variable{color:var(--dracula-foreground)}

/* Dracula Comment */div#p>svg>foreignObject>section .hljs-comment,div#p>svg>foreignObject>section .hljs-deletion,div#p>svg>foreignObject>section .hljs-quote{color:var(--scaleway-blue)}

/* Dracula Cyan */div#p>svg>foreignObject>section .hljs-built_in,div#p>svg>foreignObject>section .hljs-class,div#p>svg>foreignObject>section .hljs-link,div#p>svg>foreignObject>section .hljs-meta .hljs-doctag,div#p>svg>foreignObject>section .hljs-section,div#p>svg>foreignObject>section .hljs-selector-tag{color:var(--scaleway-blue)}


/* Dracula Green */div#p>svg>foreignObject>section .hljs-title{color:var(--dracula-green)}

/* Dracula Orange */div#p>svg>foreignObject>section .hljs-params{color:var(--dracula-orange)}

/* Dracula Pink */div#p>svg>foreignObject>section .hljs-keyword{color:var(--dracula-pink)}

/* Dracula Purple */div#p>svg>foreignObject>section .hljs-literal,div#p>svg>foreignObject>section .hljs-number{color:var(--scaleway-blue)}

/* Dracula Red */div#p>svg>foreignObject>section .hljs-regexp{color:var(--dracula-red)}

/* Dracula Yellow */div#p>svg>foreignObject>section .hljs-addition,div#p>svg>foreignObject>section .hljs-attr,div#p>svg>foreignObject>section .hljs-bullet,div#p>svg>foreignObject>section .hljs-name,div#p>svg>foreignObject>section .hljs-string,div#p>svg>foreignObject>section .hljs-symbol,div#p>svg>foreignObject>section .hljs-template-tag,div#p>svg>foreignObject>section .hljs-type{color:var(--dracula-yellow)}div#p>svg>foreignObject>section .hljs-doctag,div#p>svg>foreignObject>section .hljs-keyword,div#p>svg>foreignObject>section .hljs-literal,div#p>svg>foreignObject>section .hljs-name,div#p>svg>foreignObject>section .hljs-section,div#p>svg>foreignObject>section .hljs-selector-tag,div#p>svg>foreignObject>section .hljs-strong,div#p>svg>foreignObject>section .hljs-title,div#p>svg>foreignObject>section .hljs-type{font-weight:bold}div#p>svg>foreignObject>section .hljs-emphasis,div#p>svg>foreignObject>section .hljs-params{font-style:italic}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{max-height:580px}div#p>svg>foreignObject>section h1,div#p>svg>foreignObject>section h2,div#p>svg>foreignObject>section h3,div#p>svg>foreignObject>section h4,div#p>svg>foreignObject>section h5,div#p>svg>foreignObject>section h6{margin:0.5em 0 0 0;color:var(--scaleway-white);font-family:"Poppins",sans-serif}div#p>svg>foreignObject>section h1 strong,div#p>svg>foreignObject>section h2 strong,div#p>svg>foreignObject>section h3 strong,div#p>svg>foreignObject>section h4 strong,div#p>svg>foreignObject>section h5 strong,div#p>svg>foreignObject>section h6 strong{font-weight:inherit}div#p>svg>foreignObject>section h1{font-size:1.8em}div#p>svg>foreignObject>section h2{font-size:1.5em}div#p>svg>foreignObject>section h3{font-size:1.3em}div#p>svg>foreignObject>section h4{font-size:1.1em}div#p>svg>foreignObject>section h5{font-size:1em}div#p>svg>foreignObject>section h6{font-size:0.9em}div#p>svg>foreignObject>section blockquote,div#p>svg>foreignObject>section p{margin:1em 0 0 0}div#p>svg>foreignObject>section ol>li,div#p>svg>foreignObject>section ul>li{margin:0.3em 0 0 0;color:var(--scaleway-blue)}div#p>svg>foreignObject>section ol>li>p,div#p>svg>foreignObject>section ul>li>p{margin:0.6em 0 0 0}div#p>svg>foreignObject>section code{display:inline-block;font-family:"IBM Plex Mono",monospace;font-size:0.8em;letter-spacing:0;margin:-0.1em 0.15em;padding:0.1em 0.2em;vertical-align:baseline;color:var(--scaleway-blue)}div#p>svg>foreignObject>section pre{display:block;margin:1em 0 0 0;min-height:1em;overflow:visible}div#p>svg>foreignObject>section pre code{box-sizing:border-box;margin:0;min-width:100%;padding:0.5em;font-size:0.7em}div#p>svg>foreignObject>section pre code svg[data-marp-fitting=svg]{max-height:calc(580px - 1em)}div#p>svg>foreignObject>section blockquote{margin:1em 0 0 0;padding:0 1em;position:relative;color:var(--scaleway-blue)}div#p>svg>foreignObject>section blockquote:after,div#p>svg>foreignObject>section blockquote:before{content:"“";display:block;font-family:"Times New Roman",serif;font-weight:bold;position:absolute;color:var(--scaleway-white)}div#p>svg>foreignObject>section blockquote:before{top:0;left:0}div#p>svg>foreignObject>section blockquote:after{right:0;bottom:0;transform:rotate(180deg)}div#p>svg>foreignObject>section blockquote>:first-child{margin-top:0}div#p>svg>foreignObject>section mark{background:transparent}div#p>svg>foreignObject>section table{border-spacing:0;border-collapse:collapse;margin:1em 0 0 0}div#p>svg>foreignObject>section table td,div#p>svg>foreignObject>section table th{padding:0.2em 0.4em;border-width:1px;border-style:solid}div#p>svg>foreignObject>section{font-size:35px;font-family:"Open Sans",sans-serif;line-height:1.35;letter-spacing:1.25px;padding:70px;background-color:var(--scaleway-purple);background:linear-gradient(45deg,var(--scaleway-purple) 0%,var(--scaleway-light-purple) 100%);color:var(--scaleway-white)}div#p>svg>foreignObject>section{--marpit-root-font-size:35px}div#p>svg>foreignObject>section>:first-child,div#p>svg>foreignObject>section>header:first-child+*{margin-top:0}div#p>svg>foreignObject>section a,div#p>svg>foreignObject>section mark{color:var(--dracula-red)}div#p>svg>foreignObject>section code{background:var(--scaleway-white);color:var(--scaleway-purple)}div#p>svg>foreignObject>section h1 strong,div#p>svg>foreignObject>section h2 strong,div#p>svg>foreignObject>section h3 strong,div#p>svg>foreignObject>section h4 strong,div#p>svg>foreignObject>section h5 strong,div#p>svg>foreignObject>section h6 strong{color:var(--dracula-current-line)}div#p>svg>foreignObject>section pre>code{background:var(--scaleway-white)}div#p>svg>foreignObject>section blockquote:after,div#p>svg>foreignObject>section blockquote:before,div#p>svg>foreignObject>section footer,div#p>svg>foreignObject>section header,div#p>svg>foreignObject>section section:after{color:var(--scaleway-white)}div#p>svg>foreignObject>section table td,div#p>svg>foreignObject>section table th{border-color:var(--dracula-current-line)}div#p>svg>foreignObject>section table thead th{background:var(--dracula-current-line);color:var(--dracula-yellow)}div#p>svg>foreignObject>section table tbody>tr:nth-child(2n) td,div#p>svg>foreignObject>section table tbody>tr:nth-child(2n) th{background:var(--dracula-current-line)}div#p>svg>foreignObject>section p img{border-radius:30px;box-shadow:0px 0px 54px 0px rgba(0,0,0,0.20);-webkit-box-shadow:0px 0px 54px 0px rgba(0,0,0,0.20);-moz-box-shadow:0px 0px 54px 0px rgba(0,0,0,0.20)}div#p>svg>foreignObject>section:after,div#p>svg>foreignObject>section footer,div#p>svg>foreignObject>section header{box-sizing:border-box;font-size:66%;height:70px;line-height:50px;overflow:hidden;padding:10px 25px;position:absolute;color:var(--scaleway-blue)}div#p>svg>foreignObject>section:after{--marpit-root-font-size:66%}div#p>svg>foreignObject>section header{left:0;right:0;top:0}div#p>svg>foreignObject>section footer{left:0;right:0;bottom:0}div#p>svg>foreignObject>section:after{right:0;bottom:0;font-size:80%}div#p>svg>foreignObject>section:after{--marpit-root-font-size:80%}

/* @theme bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv */div#p>svg>foreignObject>section img[alt~=center]{display:block;margin:0 auto}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]{columns:initial!important;display:block!important;padding:0!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:before,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:before{display:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction=vertical]{flex-direction:column}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split]>div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split,50%)}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split=right]>div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]>figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#p>svg>foreignObject>section[data-marpit-advanced-background=content],div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo]{background:transparent!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo],div#p>svg[data-marpit-svg]>foreignObject[data-marpit-advanced-background=pseudo]{pointer-events:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background-split]{width:100%;height:100%}</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id="p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="1" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Technologies @ Scaleway</h1>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>Boris Jacquot - 2021
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="2" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Summary</h1>
<ol>
<li>Stack HashiCorp
<ul>
<li>Consul</li>
<li>Nomad</li>
<li>Going further</li>
</ul>
</li>
</ol>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="3" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Summary</h1>
<ol start="2">
<li>Monitoring
<ul>
<li>Prometheus</li>
<li>Exporters</li>
<li>Grafana</li>
<li>OpsGenie</li>
<li>Kibana</li>
<li>Sentry</li>
</ul>
</li>
</ol>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="4" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Summary</h1>
<ol start="3">
<li>
<p>Redis</p>
</li>
<li>
<p>RabbitMQ</p>
</li>
<li>
<p>Example of architecture</p>
</li>
</ol>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="5" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>1. Stack HashiCorp</h1>
<p>Based in 2012.</p>
<p>Creating software for Datacenters management.</p>
<p><img src="https://www.nomadproject.io/img/og-image.png" alt="h:200" style="height:200px;" /> <img src="https://www.consul.io/img/og-image.png" alt="h:200" style="height:200px;" /> <img src="https://www.vaultproject.io/img/og-image.png" alt="h:200" style="height:200px;" /></p>
<p><em>In this presentation, we will only talk about Nomad and Consul.</em></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="6" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Consul</h1>
<p>Consul is mainly a <code>Service Discovery</code> software.</p>
<p>Has several functions:</p>
<ul>
<li>Service Discovery <em>(obviously)</em></li>
<li>Health Checks</li>
<li>Key/Values store</li>
<li>Multi Datacenter capabilities</li>
<li>Intentions</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="7" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<p><img src="https://i.imgur.com/djoZokK.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="8" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>How does Consul work?</h1>
<p>Client/Server system with <code>Agents</code></p>
<ul>
<li>server: registering the services</li>
<li>client: doing requests to the server</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="9" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>How to get informations?</h1>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>$ dig @127.0.0.1 -p 8600 -t SRV web-1.service.consul
[...]
;; ANSWER SECTION:
web-1.service.consul.	0	IN	SRV	1 1 26724 0a290781.addr.dc1.consul.
web-1.service.consul.	0	IN	SRV	1 1 28372 0a290781.addr.dc1.consul.
web-1.service.consul.	0	IN	SRV	1 1 30376 0a290781.addr.dc1.consul.
web-1.service.consul.	0	IN	SRV	1 1 25478 0a290781.addr.dc1.consul.
;; ADDITIONAL SECTION:
0a290781.addr.dc1.consul. 0	IN	A	10.0.0.129
dev-bjacquot.node.dc1.consul. 0	IN	TXT	&quot;consul-network-segment=&quot;
0a290781.addr.dc1.consul. 0	IN	A	10.0.0.129
dev-bjacquot.node.dc1.consul. 0	IN	TXT	&quot;consul-network-segment=&quot;
[...]
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="10" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad</h1>
<p>Nomad is an <code>Orchestrator</code></p>
<p><strong>It needs specifications:</strong></p>
<p>-&gt; it does whatever it takes to respect these specifications</p>
<p>As Consul, it used the <code>Agent</code> system.</p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="11" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (1/8)</h1>
<p><em>main block</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>job &quot;web&quot; {
  datacenters = [&quot;dc1&quot;]
  type=&quot;service&quot;
  [...]
}
</span></span></foreignObject></svg></code></pre>
<p>Other blocks come inside it</p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="12" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (2/8)</h1>
<p><em>group block</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>  group &quot;cache&quot; {
    count = 3
    [...]
  }
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="13" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (3/8)</h1>
<p><em>network block</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>    network {
      port &quot;serv&quot; {
        to = 80
      }
    }
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="14" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (4/8)</h1>
<p><em>service block</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>    service {
      name = &quot;web-1&quot;
      tags = [&quot;global&quot;, &quot;cache&quot;]
      port = &quot;serv&quot;

      check {
        type     = &quot;tcp&quot;
        interval = &quot;10s&quot;
        timeout  = &quot;2s&quot;
      }
    }
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="15" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (5/8)</h1>
<p><em>another check</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>      check {
        type     = &quot;http&quot;
        port     = &quot;web&quot;
        path     = &quot;/&quot;
        interval = &quot;10s&quot;
        timeout  = &quot;2s&quot;
      }
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="16" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (6/8)</h1>
<p><img src="https://i.imgur.com/xpte7Bk.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="17" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (7/8)</h1>
<p><em>task block</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>    task &quot;nginx&quot; {
      driver = &quot;docker&quot;
      config {
        image = &quot;web-1:v1&quot;
        ports = [&quot;serv&quot;]
      }
      resources {
        cpu    = 500 # 500 MHz
        memory = 256 # 256MB
      }
    }
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="18" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad job example (8/8)</h1>
<p><em>update block (similar as migrate and restart</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>  update {
    max_parallel = 1
    min_healthy_time = &quot;10s&quot;
    healthy_deadline = &quot;3m&quot;
    progress_deadline = &quot;10m&quot;
    [...]
  }
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="19" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Nomad in Consul</h1>
<p><img src="https://i.imgur.com/rxXPnVJ.png" alt="w:800 center" style="width:800px;" /></p>
<p><em>Informations from Nomad inside Consul</em></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="20" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="20" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Going further : Load Balancing with HAProxy</h1>
<p>We can easily integrate HAProxy in this infrastructure -&gt; with DNS API</p>
<p>It can access to the address/port combo and doing its stuff</p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="21" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="21" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>HAProxy Example (1/3)</h1>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>frontend www
	bind :8889
	default_backend www_back

backend www_back
	balance roundrobin
	server web1 XX.XX.XX.XX:8080 check
	server web2 XX.XX.XX.XX:8081 check
	server web3 XX.XX.XX.XX:8082 check
</span></span></foreignObject></svg></code></pre>
<p><em>classic load balancing</em></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="22" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="22" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>HAProxy Example (2/3)</h1>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>resolvers consul
	nameserver consul XX.XX.XX.XX:8600
	accepted_payload_size 8192
	hold valid 5s

frontend www
	bind :8889
	default_backend www_back

backend www_back
	balance roundrobin
	server-template web 4 _web-1._web.service.consul resolvers consul resolve-opts allow-dup-ip resolve-prefer ipv4 check
	#                     _SERVICE._TAG                                              
</span></span></foreignObject></svg></code></pre>
<p><em>with Consul service discovery</em></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="23" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="23" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>HAProxy Example (2/2)</h1>
<p><em>HAProxy stats interface</em></p>
<p><img src="https://i.imgur.com/zSvxhRe.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="24" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="24" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>2. Monitoring</h1>
<h2>Prometheus 1/3</h2>
<p><img src="https://miro.medium.com/max/3124/0*xmJhkI0IbRmbnlcG.png" alt="w:200" style="width:200px;" /></p>
<p>Saves metrics at a given moment</p>
<p>Metrics have to be in the OpenMetrics format</p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="25" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="25" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Prometheus 2/3</h1>
<p><em>configuration</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>global:
  scrape_interval:     15s 

scrape_configs:
  - job_name: 'prometheus'
    scrape_interval: 5s
    static_configs:
      - targets: ['localhost:9090']
  - job_name: 'node'
    scrape_interval: 5s
    static_configs:
      - targets: ['10.41.7.129:9100']
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="26" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="26" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Prometheus 3/3</h1>
<p><em>web interface</em></p>
<p><img src="https://i.imgur.com/oDVFqOM.png" alt="w:1100 center" style="width:1100px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="27" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="27" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Exporter</h1>
<p>Exports all the informations of a something (ex: node exporter)</p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap># TYPE process_cpu_seconds counter
# UNIT process_cpu_seconds seconds
# HELP process_cpu_seconds Total user and system CPU time spent in seconds.
process_cpu_seconds_total 4.20072246e+06
</span></span></foreignObject></svg></code></pre>
<ul>
<li>TYPE = metric family</li>
<li>HELP = comments</li>
<li>UNIT = unit</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="28" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="28" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Grafana</h1>
<p>Dahsboard generator. Uses Prometheus as a datasource</p>
<p><img src="https://i.imgur.com/y51Omfu.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="29" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="29" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>OpsGenie</h1>
<p>Uses alerts from Prometheus</p>
<p><img src="https://www.axiossystems.com/hubfs/MarketPlace/integrations/opsgenie.png" alt="w:200" style="width:200px;" /></p>
<p>When an alert is triggered it sends message in different ways</p>
<ul>
<li>Slack</li>
<li>Mails</li>
<li>...</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="30" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="30" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>OpsGenie</h1>
<p><img src="https://i.imgur.com/Ju53fRt.png" alt="w:700 center" style="width:700px;" /></p>
<p><em>example on Slack</em></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="31" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="31" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Kibana</h1>
<p>Is a log explorer</p>
<p><img src="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt0423c2ca741d3c05/5ea8c90064f47652ec7993f4/brand-kibana-220x130.svg" alt="w:200" style="width:200px;" /></p>
<ul>
<li>can easily check the logs</li>
<li>can create graphs</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="32" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="32" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Kibana</h1>
<p><img src="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blta64f0cb4ab8c7c1c/5fa31cc94a4abb73ff79b0d5/illustrated-screenshot-hero-kibana.png" alt="w:600 center" style="width:600px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="33" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="33" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Sentry</h1>
<p>Is an exception reporter</p>
<p><img src="https://www.sentry.dev/_assets2/static/default-1a447e1992a4243477b39d5fb03114fb.png" alt="w:200" style="width:200px;" /></p>
<ul>
<li>you can monitor all your exceptions</li>
<li>you add tags to differentiate them</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="34" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="34" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>Sentry</h1>
<p><img src="https://images.ctfassets.net/em6l9zw4tzag/Uo9QGMwqMA33SMjdd3kdB/0828cb1cb88ded10784ab4f202f8ff53/stream.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="35" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="35" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>3. Redis</h1>
<p>REmote DIctionary Server</p>
<p><img src="https://download.logo.wine/logo/Redis/Redis-Logo.wine.png" alt="w:200" style="width:200px;" /></p>
<ul>
<li>NoSQL : no tables, no field</li>
<li>is a simple Key/Value Database</li>
<li>works with clusters (1 slave for 1 master)</li>
<li>can be used as a cache</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="36" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="36" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>3. Redis</h1>
<p><img src="https://i.imgur.com/YFixFBd.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="37" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="37" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>4. RabbitMQ</h1>
<p>Is a message queueing software</p>
<p><img src="https://blog.zenika.com/wp-content/uploads/2012/03/RabbitMQ-1.jpg" alt="w:200" style="width:200px;" /></p>
<ul>
<li>is stores messages in different queues</li>
<li>used for communication between several applications</li>
<li><em>(and only one too)</em></li>
<li>can do asynchronous tasks</li>
</ul>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="38" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="38" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>RabbitMQ example (1/3)</h1>
<p><em>sender</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>#!/usr/bin/env python3
import pika

connection = pika.BlockingConnection(pika.ConnectionParameters(host=&quot;localhost&quot;))
channel = connection.channel()
channel.queue_declare(queue=&quot;hello&quot;)
channel.basic_publish(exchange=&quot;&quot;, routing_key=&quot;hello&quot;, body=&quot;Hello World!&quot;)
print(&quot; [x] Sent 'Hello World!'&quot;)
connection.close()
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="39" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="39" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>RabbitMQ example (2/3)</h1>
<p><em>receiver</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>#!/usr/bin/env python3
import pika

def callback(ch, method, properties, body):
    print(&quot; [x] Received %r&quot; % body)

connection = pika.BlockingConnection(pika.ConnectionParameters(host=&quot;localhost&quot;))
channel = connection.channel()
channel.queue_declare(queue=&quot;hello&quot;)
print(&quot; [*] Waiting for messages. To exit press Ctrl+C&quot;)
channel.basic_consume(queue=&quot;hello&quot;, on_message_callback=callback)
channel.start_consuming()
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="40" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="40" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>RabbitMQ example (3/3)</h1>
<p><em>sender</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>root@dev-bjacquot:~/rabbit# python send.py
 [x] Sent 'Hello World!'
</span></span></foreignObject></svg></code></pre>
<p><em>receiver</em></p>
<pre><code><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>root@dev-bjacquot:~/rabbit# python receive.py
 [*] Waiting for messages. To exit press CTRL+C
 [x] Received 'Hello World!'
</span></span></foreignObject></svg></code></pre>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="41" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="41" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>5. Example of architecture</h1>
<p><img src="https://i.imgur.com/T81wDcq.png" alt="w:800 center" style="width:800px;" /></p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="42" data-paginate="true" data-footer="![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png)" data-theme="bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv" data-marpit-pagination="42" data-marpit-pagination-total="42" style="--paginate:true;--footer:![w:150](https://i.ibb.co/TRZb4R2/logo-scalway.png);--theme:bswwir3fq3n44rf1o3wepl21v0m5w70rt5sqqkk5ordv;">
<h1>That's All Folks!</h1>
<p>Thank you.</p>
<footer><img src="https://i.ibb.co/TRZb4R2/logo-scalway.png" alt="w:150" style="width:150px;" /></footer>
</section>
<script>!function(){"use strict";const t="marpitSVGPolyfill:setZoomFactor,",e=Symbol();let r,o;function n(n){const i="object"==typeof n&&n.target||document,a="object"==typeof n?n.zoom:n;window[e]||(Object.defineProperty(window,e,{configurable:!0,value:!0}),window.addEventListener("message",(({data:e,origin:r})=>{if(r===window.origin)try{if(e&&"string"==typeof e&&e.startsWith(t)){const[,t]=e.split(","),r=Number.parseFloat(t);Number.isNaN(r)||(o=r)}}catch(t){console.error(t)}})));let l=!1;Array.from(i.querySelectorAll("svg[data-marpit-svg]"),(t=>{var e,n,i,s;t.style.transform||(t.style.transform="translateZ(0)");const c=a||o||t.currentScale||1;r!==c&&(r=c,l=c);const d=t.getBoundingClientRect(),{length:u}=t.children;for(let r=0;r<u;r+=1){const o=t.children[r],a=o.getScreenCTM();if(a){const t=null!==(n=null===(e=o.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==n?n:0,r=null!==(s=null===(i=o.y)||void 0===i?void 0:i.baseVal.value)&&void 0!==s?s:0,l=o.firstElementChild,{style:u}=l;u.transformOrigin||(u.transformOrigin=`${-t}px ${-r}px`),u.transform=`scale(${c}) matrix(${a.a}, ${a.b}, ${a.c}, ${a.d}, ${a.e-d.left}, ${a.f-d.top}) translateZ(0.0001px)`}}})),!1!==l&&Array.from(i.querySelectorAll("iframe"),(({contentWindow:e})=>{null==e||e.postMessage(`${t}${l}`,"null"===window.origin?"*":window.origin)}))}r=1,o=void 0;const i=(t,e,r)=>{if(t.getAttribute(e)!==r)return t.setAttribute(e,r),!0};function a({once:t=!1,target:e=document}={}){const r="Apple Computer, Inc."===navigator.vendor?[n]:[];let o=!t;const a=()=>{for(const t of r)t({target:e});!function(t=document){Array.from(t.querySelectorAll('svg[data-marp-fitting="svg"]'),(t=>{var e;const r=t.firstChild,o=r.firstChild,{scrollWidth:n,scrollHeight:a}=o;let l,s=1;if(t.hasAttribute("data-marp-fitting-code")&&(l=null===(e=t.parentElement)||void 0===e?void 0:e.parentElement),t.hasAttribute("data-marp-fitting-math")&&(l=t.parentElement),l){const t=getComputedStyle(l),e=Math.ceil(l.clientWidth-parseFloat(t.paddingLeft||"0")-parseFloat(t.paddingRight||"0"));e&&(s=e)}const c=Math.max(n,s),d=Math.max(a,1),u=`0 0 ${c} ${d}`;i(r,"width",`${c}`),i(r,"height",`${d}`),i(t,"preserveAspectRatio",getComputedStyle(t).getPropertyValue("--preserve-aspect-ratio")||"xMinYMin meet"),i(t,"viewBox",u)&&t.classList.toggle("__reflow__")}))}(e),o&&window.requestAnimationFrame(a)};return a(),()=>{o=!1}}const l=Symbol(),s=document.currentScript;((t=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(t[l])return t[l];const e=a({target:t}),r=()=>{e(),delete t[l]};Object.defineProperty(t,l,{configurable:!0,value:r})})(s?s.getRootNode():document)}();
</script></foreignObject></svg></div><div class="bespoke-marp-note" data-index="4" tabindex="0"><p>Détailler un peu la présentation de l'entreprise</p></div><div class="bespoke-marp-note" data-index="5" tabindex="0"><p>Consul est utilisé pour faire du service discovery -&gt; c'est à dire que dans une architecture orientée services, il va faire l'inventaire de tous les services dispos sur la machine

- SD : enregistre les services comme une db. On peut avoir accès via requêtes DNS ou REST. Permet de savoir : qui tourne ? où ? sur quel IP + port ? quel est son nom ?

- HC : ex: état de la DB, réponse valide du web service, nb de sessions, conso de mémoire, cpu, etc

- K/V : on peut utiliser consul pour stocker des k/v au travers d'une REST API. Ce sont des données qui vont être utilisées par les services. ex : le header d'une page web, le mdp d'une db. pour données sensibles, on utilise Vault.

- multi datacenter : support de multiples DC (évite une couche d'abstraction supérieure). un dc ets un regroupement de clients dans une région

- intentions : permet de bloquer l'accès à des services par un autre service (genre web accède pas à bdd)</p></div><div class="bespoke-marp-note" data-index="6" tabindex="0"><p>Présentation interface consul</p></div><div class="bespoke-marp-note" data-index="7" tabindex="0"><p>L'agent (un daemon) s'exécute sur tous les membres du cluster. Système de client / serveur.

Le serveur enregistre les services et fait écriture et les synchro. On va essayer d'en avoir 3 pour qu'il y ait un quorum.

Le client fait des demandes au serveur et fait part des services et des KV au serveur</p></div><div class="bespoke-marp-note" data-index="8" tabindex="0"><p>récupération des info via API DNS. 
le poids dns est le port du service
l'ip est l'ip du service</p></div><div class="bespoke-marp-note" data-index="9" tabindex="0"><p>Orchestrateur : on va lui donner un cahier des charges et il va s'arranger pour le respecter.

Ex: si on lui demande 3 serv nginx up il va s'arranger pour que ce soit toujours le cas.
Il est capable de faire des health checks lui aussi et peut fair des actions (reboot un serv down par ex)

Nomad va s'occuper de lancer lui même les conteneurs avec Docker avec l'image qu'on lui a donné

Lors d'un déploiment il va shutdown -&gt; update -&gt; restart chaque conteneur chacun leur tour (suivant comment on l'a config) donc pas d'interruption de service.

client/server : le client regarde si un travail lui est assigné et l'execute. Serveur = cerveau, ils managent les jobs</p></div><div class="bespoke-marp-note" data-index="10" tabindex="0"><p>Dans un fichier .nomad
Découpé en plusieurs blocs
Block job est le block principal et d'autres blocs vont s'insérer à l'intérieur

Plusieurs types dispo : system ou batch aussi
batch = executer un conteneur à un instant donné
system = un job qui doit tourner sur tous les clients du node -&gt; utile pour déployer et manager des taches qui doivent être présentent sur tout le cluster</p></div><div class="bespoke-marp-note" data-index="11" tabindex="0"><p>série de taches qui vont être faites sur le même client Nomad. Toutes les taches dans ce block seront placées sur le même client.</p></div><div class="bespoke-marp-note" data-index="12" tabindex="0"><p>on indique le port sur lequel fonctionne le service (que docker va rediriger après avec un port aléatoire que choisi Nomad). Ici on fait du nginx donc port 80</p></div><div class="bespoke-marp-note" data-index="13" tabindex="0"><p>on donne les infos de notre service 
check : health check qui est fait par Nomad</p></div><div class="bespoke-marp-note" data-index="16" tabindex="0"><p>La tache à effectuer. Ici un conteneur avec l'image que l'on veut + ressources attribuées</p></div><div class="bespoke-marp-note" data-index="17" tabindex="0"><p>comment Nomad fonctionne pour les updates
blocks similaires pour les migrations (migrate) et restart (qui se met dans le block group)</p></div><div class="bespoke-marp-note" data-index="18" tabindex="0"><p>Les jobs sont enregistrés comme services par Consul automatiquement (si on est bien en mode connecté + adresse de consul bien config)
On y a donc accès depuis l'api de consul</p></div><div class="bespoke-marp-note" data-index="19" tabindex="0"><p>Grâce à HAProxy, il est possible d efaire du LB entre les conteneurs lancés par nomad.

HaProxy va récupérer via l'API DNS de Consul la liste des conteneurs lancés et s'occuper de rediriger leurs ports vers un unique et faire du LB.</p></div><div class="bespoke-marp-note" data-index="21" tabindex="0"><p>front end notre front avec le back www-backend
backend : algo roundrobin entre les serv
resolver : dns api</p></div><div class="bespoke-marp-note" data-index="23" tabindex="0"><p>affiche les metrics à un instant t
compatible avec tous les metrics de type OpenMetrics -&gt; norme</p></div><div class="bespoke-marp-note" data-index="24" tabindex="0"><p>on lui donne un fichier yml en lui donnant les points de metrics
comment les obtenir ? avec un exporter</p></div><div class="bespoke-marp-note" data-index="25" tabindex="0"><p>interface web
pour récup des infos on execute une commande</p></div><div class="bespoke-marp-note" data-index="26" tabindex="0"><p>exporter il en existe plein pour tout et n'importe quoi
ici j'ai utilisé node exporter -&gt; harware et kernel metrics
syntaxe openmetrics</p></div><div class="bespoke-marp-note" data-index="27" tabindex="0"><p>très simple à setup
intégration de prometheus se fait dans interface web
il existe plein de templates de dashboards</p></div><div class="bespoke-marp-note" data-index="28" tabindex="0"><p>Fait par Atlassian (Jira, Confluence)
Il utilise les alrts qu'on config dans prometheus. Quand une alerte est trigger, il s'occupe d'envoyer des messages suivant comment on l'a config
-&gt; par exemple envoyer un message à celui qui est d'astreinte, etc</p></div><div class="bespoke-marp-note" data-index="32" tabindex="0"><p>Les exceptions sont rapportées dans sentry suivant comment on a codé notre app
On peut aussi envoyer à sentry sans que ce soit une exception, genre un warning quand on sait que ça va mal mais que y'a pas eu d'exception
on peut set des tags pour avoir des infos sur les exceptions (environnement, serveur, etc)</p></div><div class="bespoke-marp-note" data-index="34" tabindex="0"><p>permet de manipuler des types de données simples (strings, tableaux associatifs, listes, ensembles)
nosql: pas schema classique avec tables des champs, juste des key values (un dictionnaire quoi)
cluster : réplication. Un replica est un master et un slave. Réplication de donnée, donc redondance donc cool. Les données sont partagées dans le cluster (haute disponibilité)
sert de cache car peut retrouver les données sans chercher dans les disques en sauvegardant en mémoire</p></div><div class="bespoke-marp-note" data-index="36" tabindex="0"><p>message queueing
une appli envoie un message dans une file et il est enregistré dedans. L'autre application est abonnée à la file et va recevoir le message
Pratique si il y a beaucoup de messages pour éviter le flood
Asynchrone : on fait la demande pour executer le job, on va pas bloquer le process pour l'executer</p></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@1.1.1/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";var e=function(e,t){var n,r=1===(e.parent||e).nodeType?e.parent||e:document.querySelector(e.parent||e),a=[].filter.call("string"==typeof e.slides?r.querySelectorAll(e.slides):e.slides||r.children,(function(e){return"SCRIPT"!==e.nodeName})),s={},i=function(e,t){return(t=t||{}).index=a.indexOf(e),t.slide=e,t},o=function(e,t){s[e]=(s[e]||[]).filter((function(e){return e!==t}))},l=function(e,t){return(s[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},c=function(e,t){a[e]&&(n&&l("deactivate",i(n,t)),n=a[e],l("activate",i(n,t)))},d=function(e,t){var r=a.indexOf(n)+e;l(e>0?"next":"prev",i(n,t))&&c(r,t)},u={off:o,on:function(e,t){return(s[e]||(s[e]=[])).push(t),o.bind(null,e,t)},fire:l,slide:function(e,t){if(!arguments.length)return a.indexOf(n);l("slide",i(a[e],t))&&c(e,t)},next:d.bind(null,1),prev:d.bind(null,-1),parent:r,slides:a,destroy:function(e){l("destroy",i(n,e)),s={}}};return(t||[]).forEach((function(e){e(u)})),n||c(0),u};function t(e){e.parent.classList.add("bespoke-marp-parent"),e.slides.forEach((e=>e.classList.add("bespoke-marp-slide"))),e.on("activate",(t=>{const n=t.slide,r=!n.classList.contains("bespoke-marp-active");e.slides.forEach((e=>{e.classList.remove("bespoke-marp-active"),e.setAttribute("aria-hidden","true")})),n.classList.add("bespoke-marp-active"),n.removeAttribute("aria-hidden"),r&&(n.classList.add("bespoke-marp-active-ready"),document.body.clientHeight,n.classList.remove("bespoke-marp-active-ready"))}))}function n(e){let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map((e=>[null,...e.querySelectorAll("[data-marpit-fragment]")]))});const r=r=>void 0!==e.fragments[t][n+r],a=(r,a)=>{t=r,n=a,e.fragments.forEach(((e,t)=>{e.forEach(((e,n)=>{if(null==e)return;const s=t<r||t===r&&n<=a;e.setAttribute("data-bespoke-marp-fragment",s?"active":"inactive"),t===r&&n===a?e.setAttribute("data-bespoke-marp-current-fragment","current"):e.removeAttribute("data-bespoke-marp-current-fragment")}))})),e.fragmentIndex=a;const s={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:a};e.fire("fragment",s)};e.on("next",(({fragment:s=!0})=>{if(s){if(r(1))return a(t,n+1),!1;const s=t+1;e.fragments[s]&&a(s,0)}else{const r=e.fragments[t].length;if(n+1<r)return a(t,r-1),!1;const s=e.fragments[t+1];s&&a(t+1,s.length-1)}})),e.on("prev",(({fragment:s=!0})=>{if(r(-1)&&s)return a(t,n-1),!1;const i=t-1;e.fragments[i]&&a(i,e.fragments[i].length-1)})),e.on("slide",(({index:t,fragment:n})=>{let r=0;if(void 0!==n){const a=e.fragments[t];if(a){const{length:e}=a;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}a(t,r)})),a(0,0)}var r,a={exports:{}};r=a,function(){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},t=r.exports,n=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,a=n.length,s={};r<a;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)s[n[0][r]]=t[r];return s}return!1}(),a={change:n.fullscreenchange,error:n.fullscreenerror},s={request:function(t,r){return new Promise(function(a,s){var i=function(){this.off("change",i),a()}.bind(this);this.on("change",i);var o=(t=t||e.documentElement)[n.requestFullscreen](r);o instanceof Promise&&o.then(i).catch(s)}.bind(this))},exit:function(){return new Promise(function(t,r){if(this.isFullscreen){var a=function(){this.off("change",a),t()}.bind(this);this.on("change",a);var s=e[n.exitFullscreen]();s instanceof Promise&&s.then(a).catch(r)}else t()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(t,n){var r=a[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=a[t];r&&e.removeEventListener(r,n,!1)},raw:n};n?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[n.fullscreenEnabled])}}}),t?r.exports=s:window.screenfull=s):t?r.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}();var s=a.exports;function i(e){e.fullscreen=()=>{s.isEnabled&&s.toggle(document.body)},document.addEventListener("keydown",(t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!s.isEnabled||(e.fullscreen(),t.preventDefault())}))}function o(e=2e3){return t=>{let n;function r(){n&&clearTimeout(n),n=setTimeout((()=>{t.parent.classList.add("bespoke-marp-inactive"),t.fire("marp-inactive")}),e),t.parent.classList.contains("bespoke-marp-inactive")&&(t.parent.classList.remove("bespoke-marp-inactive"),t.fire("marp-active"))}document.addEventListener("mousedown",r),document.addEventListener("mousemove",r),document.addEventListener("touchend",r),setTimeout(r,0)}}const l=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"];function c(e){e.parent.addEventListener("keydown",(e=>{if(!e.target)return;const t=e.target;(l.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()}))}function d(e){window.addEventListener("load",(()=>{for(const t of e.slides){const e=t.querySelector("[data-marp-fitting]")?"":"hideable";t.setAttribute("data-bespoke-marp-load",e)}}))}var u;function f({interval:e=250}={}){return t=>{document.addEventListener("keydown",(e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()}));let n,r,a=0;t.parent.addEventListener("wheel",(s=>{let i=!1;const o=(e,t)=>{e&&(i=i||function(e,t){return function(e,t){const n=t===u.X?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]}(e,t)&&function(e,t){const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r}(getComputedStyle(e),t)}(e,t)),(null==e?void 0:e.parentElement)&&o(e.parentElement,t)};if(0!==s.deltaX&&o(s.target,u.X),0!==s.deltaY&&o(s.target,u.Y),i)return;s.preventDefault();const l=Math.sqrt(Math.pow(s.deltaX,2)+Math.pow(s.deltaY,2));if(void 0!==s.wheelDelta){if(void 0===s.webkitForce&&Math.abs(s.wheelDelta)<40)return;if(s.deltaMode===s.DOM_DELTA_PIXEL&&l<4)return}else if(s.deltaMode===s.DOM_DELTA_PIXEL&&l<12)return;r&&clearTimeout(r),r=setTimeout((()=>{n=0}),e);const c=Date.now()-a<e,d=l<=n;if(n=l,c||d)return;let f;(s.deltaX>0||s.deltaY>0)&&(f="next"),(s.deltaX<0||s.deltaY<0)&&(f="prev"),f&&(t[f](),a=Date.now())}))}}!function(e){e.X="X",e.Y="Y"}(u||(u={}));const p=(...e)=>history.replaceState(...e),m="data-bespoke-view",g="presenter",h="next",v=["",g,h],b=(e,{protocol:t,host:n,pathname:r,hash:a}=location)=>{const s=e.toString();return`${t}//${n}${r}${s?"?":""}${s}${a}`},w=()=>{const e=document.body.getAttribute(m);if(v.includes(e))return e;throw new Error("View mode is not assigned.")},y=e=>new URLSearchParams(location.search).get(e),k=(e,t={})=>{var n;const r=Object.assign({location:location,setter:p},t),a=new URLSearchParams(r.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?a.set(t,n):a.delete(t)}try{r.setter(Object.assign({},null!==(n=window.history.state)&&void 0!==n?n:{}),"",b(a,r.location))}catch(e){console.error(e)}},E={available:(()=>{try{return localStorage.setItem("bespoke-marp","bespoke-marp"),localStorage.removeItem("bespoke-marp"),!0}catch(e){return console.warn("Warning: Using localStorage is restricted in the current host so some features may not work."),!1}})(),get:e=>{try{return localStorage.getItem(e)}catch(e){return null}},set:(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(e){return!1}},remove:e=>{try{return localStorage.removeItem(e),!0}catch(e){return!1}}};function x(e=".bespoke-marp-osc"){const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[data-bespoke-marp-osc=${JSON.stringify(e)}]`).forEach(n)};return s.isEnabled||n("fullscreen",(e=>e.style.display="none")),E.available||n("presenter",(e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."})),e=>{t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;switch(n&&t.target.blur(),n){case"next":e.next({fragment:!t.shiftKey});break;case"prev":e.prev({fragment:!t.shiftKey});break;case"fullscreen":"function"==typeof e.fullscreen&&s.isEnabled&&e.fullscreen();break;case"presenter":e.openPresenterView()}}})),e.parent.appendChild(t),e.on("activate",(({index:t})=>{n("page",(n=>n.textContent=`Page ${t+1} of ${e.slides.length}`))})),e.on("fragment",(({index:t,fragments:r,fragmentIndex:a})=>{n("prev",(e=>e.disabled=0===t&&0===a)),n("next",(n=>n.disabled=t===e.slides.length-1&&a===r.length-1))})),e.on("marp-active",(()=>t.removeAttribute("aria-hidden"))),e.on("marp-inactive",(()=>t.setAttribute("aria-hidden","true"))),s.isEnabled&&s.onchange((()=>n("fullscreen",(e=>e.classList.toggle("exit",s.isEnabled&&s.isFullscreen)))))}}function L(e){window.addEventListener("message",(t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let a=Number.parseInt(t,10),s=Number.parseInt(n,10)+1;s>=e.fragments[a].length&&(a+=1,s=0),e.slide(a,{fragment:s})}}))}function S(e){if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:M},presenterUrl:{enumerable:!0,get:I}}),E.available&&document.addEventListener("keydown",(t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())}))}function M(){const e=Math.max(Math.floor(.85*window.innerWidth),640),t=Math.max(Math.floor(.85*window.innerHeight),360);return window.open(this.presenterUrl,`bespoke-marp-presenter-${this.syncKey}`,`width=${e},height=${t},menubar=no,toolbar=no`)}function I(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),b(e)}var P=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];let O=e=>String(e).replace(/[&<>"']/g,(e=>`&${F[e]};`)),F={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},$="dangerouslySetInnerHTML",A={className:"class",htmlFor:"for"},T={};function q(e,t){let n=[],r="";t=t||{};for(let e=arguments.length;e-- >2;)n.push(arguments[e]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(let e in t)!1!==t[e]&&null!=t[e]&&e!==$&&(r+=` ${A[e]?A[e]:O(e)}="${O(t[e])}"`);r+=">"}if(-1===P.indexOf(e)){if(t[$])r+=t[$].__html;else for(;n.length;){let e=n.pop();if(e)if(e.pop)for(let t=e.length;t--;)n.push(e[t]);else r+=!0===T[e]?e:O(e)}r+=e?`</${e}>`:""}return T[r]=!0,r}const K=({children:e})=>q(null,null,...e),N="bespoke-marp-presenter-container",C="bespoke-marp-presenter-next",D="bespoke-marp-presenter-next-container",j="bespoke-marp-presenter-note-container",X="bespoke-marp-presenter-info-container",R="bespoke-marp-presenter-info-page",U="bespoke-marp-presenter-info-page-text",B="bespoke-marp-presenter-info-page-prev",V="bespoke-marp-presenter-info-page-next",Y="bespoke-marp-presenter-info-time",H="bespoke-marp-presenter-info-timer";function z(e){const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=N,t.appendChild(e),t.insertAdjacentHTML("beforeend",q(K,null,q("div",{class:D},q("iframe",{class:C,src:"?view=next"})),q("div",{class:j}),q("div",{class:X},q("div",{class:R},q("button",{class:B,tabindex:"-1",title:"Previous"},"Previous"),q("span",{class:U}),q("button",{class:V,tabindex:"-1",title:"Next"},"Next")),q("time",{class:Y,title:"Current time"}),q("div",{class:H})))),t})(e.parent)),(e=>{r(D).addEventListener("click",(()=>e.next()));const t=r(C),n=(a=t,(e,t)=>{var n;return null===(n=a.contentWindow)||void 0===n?void 0:n.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin)});var a;t.addEventListener("load",(()=>{r(D).classList.add("active"),n(e.slide(),e.fragmentIndex),e.on("fragment",(({index:e,fragmentIndex:t})=>n(e,t)))}));const s=document.querySelectorAll(".bespoke-marp-note");s.forEach((e=>{e.addEventListener("keydown",(e=>e.stopPropagation())),r(j).appendChild(e)})),e.on("activate",(()=>s.forEach((t=>t.classList.toggle("active",t.dataset.index==e.slide()))))),e.on("activate",(({index:t})=>{r(U).textContent=`${t+1} / ${e.slides.length}`}));const i=r(B),o=r(V);i.addEventListener("click",(t=>{i.blur(),e.prev({fragment:!t.shiftKey})})),o.addEventListener("click",(t=>{o.blur(),e.next({fragment:!t.shiftKey})})),e.on("fragment",(({index:t,fragments:n,fragmentIndex:r})=>{i.disabled=0===t&&0===r,o.disabled=t===e.slides.length-1&&r===n.length-1}));const l=()=>r(Y).textContent=(new Date).toLocaleTimeString();l(),setInterval(l,250)})(e)}function _(e){const t=w();return t===h&&e.appendChild(document.createElement("span")),{"":S,[g]:z,[h]:L}[t]}function J(e){e.on("activate",(t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach((n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"}))}))}const W=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t};function G(e={}){const t=Object.assign({history:!0},e);return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},a=(t={fragment:!0})=>{((t,n)=>{const{fragments:r,slides:a}=e,s=Math.max(0,Math.min(t,a.length-1)),i=Math.max(0,Math.min(n||0,r[s].length-1));s===e.slide()&&i===e.fragmentIndex||e.slide(s,{fragment:i})})((W(location.hash.slice(1))||1)-1,t.fragment?W(y("f")||""):null)};e.on("fragment",(({index:e,fragmentIndex:r})=>{n||k({f:0===r||r.toString()},{location:Object.assign(Object.assign({},location),{hash:`#${e+1}`}),setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})})),setTimeout((()=>{a(),window.addEventListener("hashchange",(()=>r((()=>{a({fragment:!1}),k({f:void 0})})))),window.addEventListener("popstate",(()=>{n||r((()=>a()))})),n=!1}),0)}}function Q(e={}){var t;const n=e.key||(null===(t=window.history.state)||void 0===t?void 0:t.marpBespokeSyncKey)||Math.random().toString(36).slice(2),r=`bespoke-marp-sync-${n}`;var a;a={marpBespokeSyncKey:n},k({},{setter:(e,...t)=>p(Object.assign(Object.assign({},e),a),...t)});const s=()=>{const e=E.get(r);return e?JSON.parse(e):Object.create(null)},i=e=>{const t=s(),n=Object.assign(Object.assign({},t),e(t));return E.set(r,JSON.stringify(n)),n},o=()=>{window.removeEventListener("pageshow",o),i((e=>({reference:(e.reference||0)+1})))};return e=>{o(),Object.defineProperty(e,"syncKey",{value:n,enumerable:!0});let t=!0;setTimeout((()=>{e.on("fragment",(e=>{t&&i((()=>({index:e.index,fragmentIndex:e.fragmentIndex})))}))}),0),window.addEventListener("storage",(n=>{if(n.key===r&&n.oldValue&&n.newValue){const r=JSON.parse(n.oldValue),a=JSON.parse(n.newValue);if(r.index!==a.index||r.fragmentIndex!==a.fragmentIndex)try{t=!1,e.slide(a.index,{fragment:a.fragmentIndex})}finally{t=!0}}}));const a=()=>{const{reference:e}=s();void 0===e||e<=1?E.remove(r):i((()=>({reference:e-1})))};window.addEventListener("pagehide",(e=>{e.persisted&&window.addEventListener("pageshow",o),a()})),e.on("destroy",a)}}function Z({slope:e=Math.tan(-35*Math.PI/180),swipeThreshold:t=30}={}){return n=>{let r;const a=n.parent,s=e=>{const t=a.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};a.addEventListener("touchstart",(e=>{r=1===e.touches.length?s(e.touches[0]):void 0}),{passive:!0}),a.addEventListener("touchmove",(e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=s(e.touches[0]),n=t.x-r.x,a=t.y-r.y;r.delta=Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(a),2)),r.radian=Math.atan2(n,a)}else r=void 0})),a.addEventListener("touchend",(a=>{if(r){if(r.delta&&r.delta>=t&&r.radian){let t=r.radian-e;t=(t+Math.PI)%(2*Math.PI)-Math.PI,n[t<0?"next":"prev"](),a.stopPropagation()}r=void 0}}),{passive:!0})}}function ee(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))}let te;const ne=()=>(void 0===te&&(te="wakeLock"in navigator&&navigator.wakeLock),te),re=()=>ee(void 0,void 0,void 0,(function*(){const e=ne();if(e)try{return yield e.request("screen")}catch(e){console.warn(e)}return null}));function ae(){return ee(this,void 0,void 0,(function*(){if(!ne())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&re()};return document.addEventListener("visibilitychange",t),document.addEventListener("fullscreenchange",t),e=yield re(),e}))}!function(r=document.getElementById("p")){document.body.setAttribute(m,(()=>{const e=y("view");return e===h||e===g?e:""})());const a=(e=>{const t=y(e);return k({[e]:void 0}),t})("sync")||void 0,s=!1,l=!0;e(r,((...e)=>{const t=v.findIndex((e=>w()===e));if(t<0)throw new Error("Invalid view");return e.map((([e,n])=>e[t]&&n)).filter((e=>e))})([[l,l,s],Q({key:a})],[[l,l,l],_(r)],[[l,l,s],c],[[l,l,l],t],[[l,s,s],o()],[[l,l,l],d],[[l,l,l],G({history:!1})],[[l,l,s],f()],[[l,l,s],i],[[l,s,s],J],[[l,l,s],Z()],[[l,s,s],x()],[[l,l,l],n],[[l,l,s],ae]))}()}();</script></body></html>